# Paradoxical Vocal Fold Motion Diagnosis Device: Sound Analysis Package
This library is designed to analyze wav files generated by the diagnosis device to help interpret, visualize, and diagnose the respiratory state of a patient. As of 7/15/2022, the sound analysis portion of the project is composed of python code that completes filtering and spectral analysis of wav files. There is also some code written for the teensy 4.1, which currently reads and prints the value of a force sensitive resistor

The main tool, stored in __spectrogram_func.py__ is designed to be used from the commandline for developer usage, but is ultimately designed to be written such that the analysis and graphing packages can be imported to other python scripts for machine-learning & other algorithmic analysis.

![Sample Spectral Analysis](/Sample_Images/spectrogram_sound_analysis_sample.png)

## Command Line Syntax (Unix Systems)
```console
foo@bar:~$ python3 spectrogram_func.py filename.wav starting_time ending_time minimum_frequency maximum_frequency
```

- **filename.wav**: Filename or file path of wav file to be analyzed.
- **starting_time**: Starting time (float, in s) to graph (i.e. minimum x-axis value).
- **ending_time**: Ending time (float, in s) to graph (i.e. maximum x-axis value). If ending time == "None", the program will default to the audio file's duration.
- **minimum_frequency**: Lowest frequency (int, Hz) to show on graph (i.e. minimum y-axis value).
- **maximum_frequency**: Highest frequency (int, Hz) to show on graph (i.e. maximum y-axis value).

Both min & max frequency also apply butterworth bandpass filtering according to the passed in frequencies. Using the script as a collection of imported functions allows more granularity (i.e. choosing exactly what to graph, how to filter, etc.).

## Branches
- **main**: Implements spectral analysis through the scipy.signal.spectrogram function. Almost the enture development time of the project has been spent in this branch, and the other branches are there 
- **librosa**: Implements spectral analysis through the the librosa spectral analysis package.
- **specgram-test**: Uses the prebuilt matplotlib *specgram* function instead of calling plt.pcolormesh as in **main**.
- **numpy-fft**: A mostly unchanged branch with the intent to implement spectral analysis manually through numpy. In the future, it may allow more granularity.

## Overview of Code Functions